(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}function n(e,t,n){const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}var r;!function(e){e[e.active=0]="active",e[e.finished=1]="finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class l extends i{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new l),this.instance}addProject(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const a=l.getInstance();class o extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1};if(t({value:e,required:!0,minLength:6})&&t(s)&&t(i))return[e,n,+r];alert("Invalid input, please try again")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;a.addProject(e,n,r),this.clearInputs()}}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],o.prototype,"submitHandler",null);var c=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class d extends e{constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=`Number of contributors: ${this.project.people.toString()}`,this.element.querySelector("p").textContent=this.project.description}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}}c([n],d.prototype,"dragStartHandler",null),c([n],d.prototype,"dragEndHandler",null);var u=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class p extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new d(this.element.querySelector("ul").id,e)}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),a.addListener((e=>{this.assignedProjects=e.filter((e=>e.status===("active"===this.type?r.active:r.finished))),this.renderProjects()}))}renderContent(){this.element.querySelector("ul").id=`${this.type}-projects-list`,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");a.moveProject(t,"active"===this.type?r.active:r.finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}}u([n],p.prototype,"dragOverHandler",null),u([n],p.prototype,"dropHandler",null),u([n],p.prototype,"dragLeaveHandler",null),new o,new p("active"),new p("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS1EsUUFBUTZFLGlCQUFpQixXQUFXckYsS0FBS29HLGlCQUM5Q3BHLEtBQUtRLFFBQVE2RSxpQkFBaUIsWUFBWXJGLEtBQUtxRyxrQkFDL0NyRyxLQUFLUSxRQUFRNkUsaUJBQWlCLE9BQU9yRixLQUFLc0csYUFDMUN0QyxFQUFhdEIsYUFBYUssSUFDdEIvQyxLQUFLaUcsaUJBQW1CbEQsRUFBU3dELFFBQU96QyxHQUFPQSxFQUFJdkIsVUFBMEIsV0FBZHZDLEtBQUtnRyxLQUFvQjlELEVBQWNxQixPQUFTckIsRUFBY3NFLFlBQzdIeEcsS0FBS2tHLGdCQUFnQixHQUU3QixDQUVBLGFBQUFaLEdBQ0l0RixLQUFLUSxRQUFRMkQsY0FBYyxNQUFPekQsR0FBSyxHQUFHVixLQUFLZ0cscUJBQy9DaEcsS0FBS1EsUUFBUTJELGNBQWMsTUFBT3dCLFlBQWMzRixLQUFLZ0csS0FBS1MsY0FBZ0IsV0FDOUUsQ0FFQSxlQUFBTCxDQUFnQnBCLEdBQ1RBLEVBQU1ZLGNBQStDLGVBQS9CWixFQUFNWSxhQUFhYyxNQUFNLEtBQzlDMUIsRUFBTUMsaUJBQ1FqRixLQUFLUSxRQUFRMkQsY0FBYyxNQUNsQ3dDLFVBQVVDLElBQUksYUFFN0IsQ0FFQSxXQUFBTixDQUFZdEIsR0FDUixNQUFNNkIsRUFBUTdCLEVBQU1ZLGFBQWNrQixRQUFRLGNBQzFDOUMsRUFBYVAsWUFBWW9ELEVBQW9CLFdBQWQ3RyxLQUFLZ0csS0FBb0I5RCxFQUFjcUIsT0FBU3JCLEVBQWNzRSxTQUNqRyxDQUVBLGdCQUFBSCxDQUFpQnJCLEdBQ0VoRixLQUFLUSxRQUFRMkQsY0FBYyxNQUNuQ3dDLFVBQVVJLE9BQU8sWUFFNUIsRUFqQkEsR0FEQ3RGLEcsb0NBU0QsR0FEQ0EsRyxnQ0FNRCxHQURDQSxHLHFDQ25EVCxJQUFJd0MsRUFDQyxJQUFJOEIsRUFBWSxVQUNoQixJQUFJQSxFQUFZLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmFnLWRyb3AvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9kcmFnLWRyb3AvLi9zcmMvdXRpbC92YWxpZGF0aW9uLnRzIiwid2VicGFjazovL2RyYWctZHJvcC8uL3NyYy9kZWNvcmF0b3JzL2F1dG8tYmluZC50cyIsIndlYnBhY2s6Ly9kcmFnLWRyb3AvLi9zcmMvbW9kZWxzL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLy4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly9kcmFnLWRyb3AvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZHJhZy1kcm9wLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL2RyYWctZHJvcC8uL3NyYy9zY3JpcHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbiAgICAvLyBDb21wb25lbnQgQmFzZSBDbGFzc1xyXG4gICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBIVE1MRWxlbWVudCwgVSBleHRlbmRzIEhUTUxFbGVtZW50PiB7XHJcbiAgICAgICAgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgICAgIGhvc3RFbGVtZW50OiBUO1xyXG4gICAgICAgIGVsZW1lbnQ6IFU7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlSWQ6IHN0cmluZywgaG9zdEVsZW1lbnRJZDogc3RyaW5nLCBpbnNlcnRBdFN0YXJ0OiBib29sZWFuLCBuZXdFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZUlkKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhvc3RFbGVtZW50SWQpISBhcyBUO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW1wb3J0ZWROb2RlcyA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZXMuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuICAgICAgICAgICAgaWYgKG5ld0VsZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gbmV3RWxlbWVudElkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmF0dGFjaChpbnNlcnRBdFN0YXJ0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXR0YWNoKGluc2VydEF0U3RhcnQ6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoaW5zZXJ0QXRTdGFydCA/ICdhZnRlcmJlZ2luJyA6ICdiZWZvcmVlbmQnLCB0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgICAgICAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCgpOiB2b2lkO1xyXG4gICAgfVxyXG4iLCJcclxuICAgIC8vIFZhbGlkYXRpb24gTG9naWNcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xyXG4gICAgICAgIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgICAgICAgcmVxdWlyZWQ/OiBib29sZWFuO1xyXG4gICAgICAgIG1pbkxlbmd0aD86IG51bWJlcjtcclxuICAgICAgICBtYXhMZW5ndGg/OiBudW1iZXI7XHJcbiAgICAgICAgbWluPzogbnVtYmVyO1xyXG4gICAgICAgIG1heD86IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgIGV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0YWJsZUlucHV0OiBWYWxpZGF0YWJsZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodmFsaWRhdGFibGVJbnB1dC5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2YWxpZGF0YWJsZUlucHV0Lm1pbiAhPSBudWxsICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnbnVtYmVyJ1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgfVxyXG4iLCIvLyBBdXRvQmluZCBEZWNvcmF0b3JcclxuICAgZXhwb3J0IGZ1bmN0aW9uIEF1dG9CaW5kKF86IGFueSwgXzI6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4iLCJcclxuLy8gUHJvamVjdCBUeXBlXHJcbiAgIGV4cG9ydCBlbnVtIFByb2plY3RTdGF0dXMgeyBhY3RpdmUsIGZpbmlzaGVkIH1cclxuXHJcbi8vIFByb2plY3QgQ2xhc3NcclxuICAgIGV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxyXG4gICAgICAgICAgICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgICAgICAgICAgcHVibGljIHBlb3BsZTogbnVtYmVyLFxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXHJcbiAgICAgICAgKSB7fVxyXG4gICAgfVxyXG4iLCJpbXBvcnQge1Byb2plY3QsIFByb2plY3RTdGF0dXN9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG4vLyBTdGF0ZSBNYW5hZ2VtZW50XHJcblxyXG4gICAgdHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG5cclxuICAgIGNsYXNzIFN0YXRlPFQ+IHtcclxuICAgICAgICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdID0gW107XHJcblxyXG4gICAgICAgIGFkZExpc3RlbmVyKGxpc3RlbmVyRm46IExpc3RlbmVyPFQ+KSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9qZWN0U3RhdGUgZXh0ZW5kcyBTdGF0ZTxQcm9qZWN0PiB7XHJcbiAgICAgICAgcHJpdmF0ZSBwcm9qZWN0czogUHJvamVjdFtdID0gW107XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFByb2plY3RTdGF0ZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWRkUHJvamVjdCh0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBudW1PZlBlb3BsZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcclxuICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBudW1PZlBlb3BsZSxcclxuICAgICAgICAgICAgICAgIFByb2plY3RTdGF0dXMuYWN0aXZlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1vdmVQcm9qZWN0KHByb2plY3RJZDpzdHJpbmcsbmV3U3RhdHVzOlByb2plY3RTdGF0dXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZChwcmogPT4gcHJqLmlkID09PSBwcm9qZWN0SWQpO1xyXG4gICAgICAgICAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnN0YXR1cyA9IG5ld1N0YXR1cztcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVMaXN0ZW5lcnMoKXtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gIGV4cG9ydCBjb25zdCBwcm9qZWN0U3RhdGUgPSBQcm9qZWN0U3RhdGUuZ2V0SW5zdGFuY2UoKTtcclxuIiwiaW1wb3J0IHtDb21wb25lbnR9IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7VmFsaWRhdGFibGUsdmFsaWRhdGV9IGZyb20gXCIuLi91dGlsL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0IHtBdXRvQmluZH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0by1iaW5kXCI7XHJcbmltcG9ydCB7cHJvamVjdFN0YXRlfSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdC1zdGF0ZVwiO1xyXG5cclxuLy8gUHJvamVjdCBJbnB1dCBDbGFzc1xyXG4gICBleHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcclxuICAgICAgICB0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBzdXBlcigncHJvamVjdC1pbnB1dCcsICdhcHAnLCB0cnVlLCAndXNlci1pbnB1dCcpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50aXRsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwZW9wbGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRlcmVkVGl0bGUgPSB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBlbnRlcmVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZVZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHsgdmFsdWU6IGVudGVyZWRUaXRsZSwgcmVxdWlyZWQ6IHRydWUsIG1pbkxlbmd0aDogNiB9O1xyXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvblZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHsgdmFsdWU6IGVudGVyZWREZXNjcmlwdGlvbiwgcmVxdWlyZWQ6IHRydWUsIG1pbkxlbmd0aDogNSB9O1xyXG4gICAgICAgICAgICBjb25zdCBwZW9wbGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7IHZhbHVlOiArZW50ZXJlZFBlb3BsZSwgcmVxdWlyZWQ6IHRydWUsIG1pbjogMSB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZSh0aXRsZVZhbGlkYXRhYmxlKSB8fCAhdmFsaWRhdGUoZGVzY3JpcHRpb25WYWxpZGF0YWJsZSkgfHwgIXZhbGlkYXRlKHBlb3BsZVZhbGlkYXRhYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gW2VudGVyZWRUaXRsZSwgZW50ZXJlZERlc2NyaXB0aW9uLCArZW50ZXJlZFBlb3BsZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNsZWFySW5wdXRzKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEBBdXRvQmluZFxyXG4gICAgICAgIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlcklucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodXNlcklucHV0KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3RpdGxlLCBkZXNjcmlwdGlvbiwgcGVvcGxlXSA9IHVzZXJJbnB1dDtcclxuICAgICAgICAgICAgICAgIHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjcmlwdGlvbiwgcGVvcGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbnB1dHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uZmlndXJlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckNvbnRlbnQoKSB7fVxyXG4gICAgfVxyXG4iLCJpbXBvcnQge0RyYWdnYWJsZX0gZnJvbSAnLi4vbW9kZWxzL2RyYWctZHJvcCc7XHJcbmltcG9ydCB7Q29tcG9uZW50fSBmcm9tIFwiLi9iYXNlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQge1Byb2plY3R9IGZyb20gXCIuLi9tb2RlbHMvcHJvamVjdFwiO1xyXG5pbXBvcnQge0F1dG9CaW5kfSBmcm9tIFwiLi4vZGVjb3JhdG9ycy9hdXRvLWJpbmRcIjtcclxuXHJcbi8vIFByb2plY3QgSXRlbSBDbGFzc1xyXG4gICBleHBvcnQgY2xhc3MgUHJvamVjdEl0ZW0gZXh0ZW5kcyBDb21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCxIVE1MTElFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdnYWJsZXtcclxuICAgICAgICBwcml2YXRlIHByb2plY3Q6UHJvamVjdDtcclxuICAgICAgICBjb25zdHJ1Y3Rvcihob3N0SWQ6c3RyaW5nLHByb2plY3Q6UHJvamVjdCkge1xyXG4gICAgICAgICAgICBzdXBlcignc2luZ2xlLXByb2plY3QnLGhvc3RJZCxmYWxzZSxwcm9qZWN0LmlkKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpZ3VyZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsdGhpcy5kcmFnU3RhcnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLHRoaXMuZHJhZ0VuZEhhbmRsZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPWBOdW1iZXIgb2YgY29udHJpYnV0b3JzOiAke3RoaXMucHJvamVjdC5wZW9wbGUudG9TdHJpbmcoKX1gO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIEBBdXRvQmluZFxyXG4gICAgICAgIGRyYWdTdGFydEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoJ3RleHQvcGxhaW4nLHRoaXMucHJvamVjdC5pZCk7XHJcbiAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZD0nbW92ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEBBdXRvQmluZFxyXG4gICAgICAgIGRyYWdFbmRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuIiwiaW1wb3J0IHtDb21wb25lbnR9IGZyb20gXCIuL2Jhc2UtY29tcG9uZW50XCI7XHJcbmltcG9ydCB7QXV0b0JpbmR9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG8tYmluZFwiO1xyXG5pbXBvcnQge0RyYWdUYXJnZXR9IGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wXCI7XHJcbmltcG9ydCB7UHJvamVjdCwgUHJvamVjdFN0YXR1c30gZnJvbSBcIi4uL21vZGVscy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7UHJvamVjdEl0ZW19IGZyb20gXCIuL3Byb2plY3QtaXRlbVwiO1xyXG5pbXBvcnQge3Byb2plY3RTdGF0ZX0gZnJvbSBcIi4uL3N0YXRlL3Byb2plY3Qtc3RhdGVcIjtcclxuXHJcblxyXG4vLyBQcm9qZWN0IExpc3QgQ2xhc3NcclxuICAgIGV4cG9ydCBjbGFzcyBQcm9qZWN0TGlzdCBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ1RhcmdldHtcclxuICAgICAgICBhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgdHlwZTogJ2FjdGl2ZScgfCAnZmluaXNoZWQnKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCdwcm9qZWN0LWxpc3QnLCAnYXBwJywgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGApIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxpc3RFbC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG4gICAgICAgICAgICAgICAgbmV3IFByb2plY3RJdGVtKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5pZCxwcm9qZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uZmlndXJlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsdGhpcy5kcmFnTGVhdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLHRoaXMuZHJvcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBwcm9qZWN0U3RhdGUuYWRkTGlzdGVuZXIoKHByb2plY3RzOiBQcm9qZWN0W10pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihwcmogPT4gcHJqLnN0YXR1cyA9PT0gKHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLmFjdGl2ZSA6IFByb2plY3RTdGF0dXMuZmluaXNoZWQpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvamVjdHMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXJDb250ZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnR5cGUudG9VcHBlckNhc2UoKSArICcgUFJPSkVDVFMnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBAQXV0b0JpbmRcclxuICAgICAgICBkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgICAgICAgICBpZihldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSd0ZXh0L3BsYWluJyl7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdEVsID10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XHJcbiAgICAgICAgICAgICAgICBsaXN0RWwuY2xhc3NMaXN0LmFkZCgnZHJvcHBhYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgQEF1dG9CaW5kXHJcbiAgICAgICAgZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBwcmpJZCA9IGV2ZW50LmRhdGFUcmFuc2ZlciEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xyXG4gICAgICAgICAgICBwcm9qZWN0U3RhdGUubW92ZVByb2plY3QocHJqSWQsdGhpcy50eXBlID09PSAnYWN0aXZlJyA/IFByb2plY3RTdGF0dXMuYWN0aXZlIDogUHJvamVjdFN0YXR1cy5maW5pc2hlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEBBdXRvQmluZFxyXG4gICAgICAgIGRyYWdMZWF2ZUhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XHJcbiAgICAgICAgICAgIGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4iLCJpbXBvcnQge1Byb2plY3RJbnB1dH0gZnJvbSBcIi4vY29tcG9uZW50cy9wcm9qZWN0LWlucHV0XCI7XG5pbXBvcnQge1Byb2plY3RMaXN0fSBmcm9tIFwiLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdFwiO1xuXG5uZXcgUHJvamVjdElucHV0KCk7XG4gICAgIG5ldyBQcm9qZWN0TGlzdCgnYWN0aXZlJyk7XG4gICAgIG5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKTtcblxuXG5cblxuIl0sIm5hbWVzIjpbIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVJZCIsImhvc3RFbGVtZW50SWQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElkIiwidGhpcyIsInRlbXBsYXRlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJob3N0RWxlbWVudCIsImltcG9ydGVkTm9kZXMiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlkIiwiYXR0YWNoIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJ2YWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInJlcXVpcmVkIiwidmFsdWUiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJBdXRvQmluZCIsIl8iLCJfMiIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJiaW5kIiwiUHJvamVjdFN0YXR1cyIsIlByb2plY3QiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGVvcGxlIiwic3RhdHVzIiwiU3RhdGUiLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsImxpc3RlbmVyRm4iLCJwdXNoIiwiUHJvamVjdFN0YXRlIiwic3VwZXIiLCJwcm9qZWN0cyIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJhZGRQcm9qZWN0IiwibnVtT2ZQZW9wbGUiLCJuZXdQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsImFjdGl2ZSIsInVwZGF0ZUxpc3RlbmVycyIsIm1vdmVQcm9qZWN0IiwicHJvamVjdElkIiwibmV3U3RhdHVzIiwicHJvamVjdCIsImZpbmQiLCJwcmoiLCJzbGljZSIsInByb2plY3RTdGF0ZSIsIlByb2plY3RJbnB1dCIsInRpdGxlSW5wdXRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImRlc2NyaXB0aW9uSW5wdXRFbGVtZW50IiwicGVvcGxlSW5wdXRFbGVtZW50IiwiY29uZmlndXJlIiwiZ2F0aGVyVXNlcklucHV0IiwiZW50ZXJlZFRpdGxlIiwiZW50ZXJlZERlc2NyaXB0aW9uIiwiZW50ZXJlZFBlb3BsZSIsImRlc2NyaXB0aW9uVmFsaWRhdGFibGUiLCJwZW9wbGVWYWxpZGF0YWJsZSIsImFsZXJ0IiwiY2xlYXJJbnB1dHMiLCJzdWJtaXRIYW5kbGVyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW5kZXJDb250ZW50IiwiUHJvamVjdEl0ZW0iLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiUHJvamVjdExpc3QiLCJ0eXBlIiwiYXNzaWduZWRQcm9qZWN0cyIsInJlbmRlclByb2plY3RzIiwiaW5uZXJIVE1MIiwiZHJhZ092ZXJIYW5kbGVyIiwiZHJhZ0xlYXZlSGFuZGxlciIsImRyb3BIYW5kbGVyIiwiZmlsdGVyIiwiZmluaXNoZWQiLCJ0b1VwcGVyQ2FzZSIsInR5cGVzIiwiY2xhc3NMaXN0IiwiYWRkIiwicHJqSWQiLCJnZXREYXRhIiwicmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIifQ==